/* ═══════════════════════════════════════════════════════════
   RAMADAN THEME v4
   ═══════════════════════════════════════════════════════════ */

body.theme-ramadan {
    --rm-deep-night: #0a1029;
    --rm-navy: #0f1a3e;
    --rm-gold: #d4a843;
    --rm-gold-light: #f0d078;
    --rm-cream: #fef3d0;
    --rm-star: #ffe8a0;
    --rm-text-muted: rgba(254,243,208,0.75);
    --rm-card-border: rgba(212,168,67,0.25);
    --rm-card-active-border: rgba(212,168,67,0.55);
    --rm-sahur-blue: #a0c8ff;
}

body.theme-ramadan .card__icon { display: none; }

/* ═══ STERNE (genau wie dein Code) ═══════════════════════ */
.ramadan-stars { display: none; position: fixed; }

body.theme-ramadan .ramadan-stars {
    display: block;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 0;
    overflow: hidden;
}

/* Alle Deko-Elemente aus dem Flex-Flow nehmen, auch im Default */
.ramadan-lanterns {
    position: absolute;
    pointer-events: none;
}

.ramadan-star {
    position: absolute;
    width: 3px; height: 3px;
    background: var(--rm-gold-light);
    border-radius: 50%;
    opacity: 0;
    animation: twinkle var(--dur, 3s) ease-in-out infinite;
    animation-delay: var(--del, 0s);
}

@keyframes twinkle {
    0%, 100% { opacity: 0; transform: scale(0.5); }
    50%      { opacity: var(--br, 0.5); transform: scale(1); }
}

/* ═══ STERNENHIMMEL-HINTERGRUND ══════════════════════════ */
body.theme-ramadan .section {
    background-image:
        radial-gradient(1.5px 1.5px at 10% 15%, var(--rm-star) 50%, transparent 100%),
        radial-gradient(1px 1px at 25% 35%, var(--rm-gold-light) 50%, transparent 100%),
        radial-gradient(1.5px 1.5px at 40% 8%, var(--rm-star) 50%, transparent 100%),
        radial-gradient(1px 1px at 55% 25%, rgba(255,255,255,0.6) 50%, transparent 100%),
        radial-gradient(2px 2px at 70% 12%, var(--rm-star) 50%, transparent 100%),
        radial-gradient(1px 1px at 85% 30%, var(--rm-gold-light) 50%, transparent 100%),
        radial-gradient(1.5px 1.5px at 15% 60%, rgba(255,255,255,0.4) 50%, transparent 100%),
        radial-gradient(1px 1px at 90% 55%, var(--rm-star) 50%, transparent 100%),
        radial-gradient(ellipse at 20% 80%, rgba(25,40,90,0.5) 0%, transparent 60%),
        radial-gradient(ellipse at 80% 20%, rgba(40,25,70,0.4) 0%, transparent 60%),
        linear-gradient(180deg, var(--rm-deep-night) 0%, var(--rm-navy) 40%, #0d1535 70%, #0a0f28 100%);
}

body.theme-ramadan .section::before {
    content: '';
    position: absolute; inset: 0;
    background-image:
        radial-gradient(1.5px 1.5px at 18% 22%, var(--rm-star) 50%, transparent 100%),
        radial-gradient(1px 1px at 42% 18%, rgba(255,232,160,0.7) 50%, transparent 100%),
        radial-gradient(2px 2px at 65% 5%, var(--rm-star) 50%, transparent 100%),
        radial-gradient(1px 1px at 82% 42%, rgba(255,255,255,0.5) 50%, transparent 100%);
    animation: bg-twinkle 4s ease-in-out infinite alternate;
    pointer-events: none; z-index: 0;
}

/* Nur Layout-Container bekommen relative positioning, NICHT die Deko */
body.theme-ramadan .container { position: relative; z-index: 1; }
body.theme-ramadan .section { overflow: hidden; }

@keyframes bg-twinkle { 0% { opacity: 0.3; } 50% { opacity: 0.8; } 100% { opacity: 0.4; } }

/* ═══ LAYOUT ═════════════════════════════════════════════ */
body.theme-ramadan .container--main { height: auto; flex: 1 1 0; min-height: 0; }

/* ═══ HEADER ═════════════════════════════════════════════ */
body.theme-ramadan .container--header {
    background: rgba(15,26,62,0.88);
    border-bottom: 2px solid var(--rm-card-border);
    box-shadow: 0 2px 30px rgba(212,168,67,0.08), 0 0 20px 16px rgba(0,0,0,0.15);
}
body.theme-ramadan .header__title { color: var(--rm-gold-light); text-shadow: 0 0 20px rgba(212,168,67,0.3); }
body.theme-ramadan .header__subtitle { color: var(--rm-text-muted); }
body.theme-ramadan .header__divider {
    background: linear-gradient(90deg, transparent, var(--rm-gold) 20%, var(--rm-gold) 80%, transparent);
    height: 2px; min-height: 2px; flex-shrink: 0;
}
body.theme-ramadan .header__weather-temp { color: var(--rm-cream); }

/* ═══ KARTEN ═════════════════════════════════════════════ */
body.theme-ramadan .card {
    background: linear-gradient(170deg, rgba(212,168,67,0.06) 0%, rgba(15,22,50,0.4) 30%, rgba(15,22,50,0.35) 70%, rgba(212,168,67,0.04) 100%);
    border: 1.5px solid var(--rm-card-border);
    backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
    box-shadow: 0 4px 24px rgba(0,0,0,0.3), inset 0 1px 0 rgba(212,168,67,0.1);
}
body.theme-ramadan .card--active {
    background: linear-gradient(170deg, rgba(212,168,67,0.14) 0%, rgba(212,168,67,0.06) 25%, rgba(15,26,62,0.5) 60%, rgba(212,168,67,0.08) 100%);
    border-color: var(--rm-card-active-border);
    box-shadow: 0 6px 30px rgba(0,0,0,0.35), 0 0 25px rgba(212,168,67,0.12), inset 0 1px 0 rgba(212,168,67,0.2);
}
body.theme-ramadan .card__label { color: var(--rm-gold-light); letter-spacing: 0.12ch; }
body.theme-ramadan .card__time  { color: var(--rm-cream); }
body.theme-ramadan .card__icon  { color: var(--rm-gold-light); fill: var(--rm-gold-light); }

/* Sahur (Imsak) */
body.theme-ramadan .card--sahur {
    background: linear-gradient(170deg, rgba(26,58,106,0.45) 0%, rgba(15,30,70,0.5) 40%, rgba(26,58,106,0.35) 100%) !important;
    border-color: rgba(100,160,255,0.4) !important;
    box-shadow: 0 6px 30px rgba(0,0,0,0.3), 0 0 30px rgba(100,160,255,0.1), inset 0 1px 0 rgba(100,180,255,0.15) !important;
}
body.theme-ramadan .card--sahur .card__label { color: var(--rm-sahur-blue); }
body.theme-ramadan .card--sahur .card__icon  { color: var(--rm-sahur-blue); }

/* Iftar (Aksam) */
body.theme-ramadan .card--iftar {
    background: linear-gradient(170deg, rgba(212,168,67,0.2) 0%, rgba(180,100,30,0.15) 30%, rgba(106,42,26,0.3) 70%, rgba(212,168,67,0.1) 100%) !important;
    border-color: rgba(240,180,80,0.5) !important;
    box-shadow: 0 6px 30px rgba(0,0,0,0.3), 0 0 35px rgba(212,168,67,0.15), inset 0 1px 0 rgba(240,208,120,0.2) !important;
}
body.theme-ramadan .card--iftar .card__label { color: var(--rm-gold-light); }
body.theme-ramadan .card--iftar .card__time  { color: var(--rm-gold-light); text-shadow: 0 0 12px rgba(212,168,67,0.4); }
body.theme-ramadan .card--iftar .card__icon  { color: var(--rm-gold-light); }

/* ═══ HINT-SLOT FARBEN ═══════════════════════════════════ */
body.theme-ramadan .card__hint-line1 { color: var(--rm-text-muted); }
body.theme-ramadan .card__hint-line2 { color: var(--rm-star); }
body.theme-ramadan .card__hint-icon  { color: var(--rm-star); }

body.theme-ramadan .card--sahur .card__hint-line2 { color: var(--rm-sahur-blue); }
body.theme-ramadan .card--sahur .card__hint-icon  { color: var(--rm-sahur-blue); }

/* Iftar-Hint: eigene Box */
body.theme-ramadan .card__hint--iftar {
    background: linear-gradient(135deg, rgba(212,168,67,0.15), rgba(180,120,30,0.1));
    border: 1px solid rgba(212,168,67,0.25);
    border-radius: clamp(3px, 0.4vw, 5px);
    padding: 0.4rem 0.8rem;
}
body.theme-ramadan .card__hint--iftar .card__hint-line1 { color: var(--rm-gold-light); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05ch; }
body.theme-ramadan .card__hint--iftar .card__hint-line2 { color: var(--rm-gold-light); font-variant-numeric: tabular-nums; }
body.theme-ramadan .card__hint--iftar .card__hint-icon  { color: var(--rm-gold-light); }

/* ═══ INFO-KARTE ═════════════════════════════════════════ */
body.theme-ramadan .card--info { border-color: rgba(212,168,67,0.4); }
body.theme-ramadan .info__clock { color: var(--rm-gold-light); text-shadow: 0 0 15px rgba(212,168,67,0.25); font-size: min(clamp(2rem, 3.2vw, 4rem), 5vh); }
body.theme-ramadan .info__text  { color: var(--rm-text-muted); font-size: min(clamp(1rem, 1.4vw, 1.6rem), 2.4vh); font-weight: 600; }
body.theme-ramadan .info__divider {
    background: linear-gradient(90deg, transparent, var(--rm-gold) 30%, var(--rm-gold) 70%, transparent);
    height: 2px; min-height: 2px; flex-shrink: 0; opacity: 0.6;
}
body.theme-ramadan .info__label       { color: var(--rm-text-muted); font-size: min(clamp(1.1rem, 1.6vw, 1.8rem), 2.2vh); font-weight: 600; }
body.theme-ramadan .info__prayer-name { color: var(--rm-gold-light); font-size: min(clamp(1.4rem, 2vw, 2.4rem), 2.4vh); }
body.theme-ramadan .info__clock--urgent { color: var(--rm-gold-light) !important; animation: ramadan-pulse 2s ease-in-out infinite; }

body.theme-ramadan .info__section, body.theme.ramadan .info__section--lower {
    padding: clamp(0.5rem, 1.2vw, 1.8rem);
}

@keyframes ramadan-pulse {
    0%,100% { opacity: 1; transform: scale(1); text-shadow: 0 0 15px rgba(212,168,67,0.3); }
    50%     { opacity: 0.7; transform: scale(1.05); text-shadow: 0 0 30px rgba(212,168,67,0.6); }
}

/* ═══ BANNER (mit lantern.svg als <img>) ═════════════════ */
.ramadan-banner { display: none; }

body.theme-ramadan .ramadan-banner {
    display: flex; align-items: center; justify-content: center;
    gap: clamp(1rem, 1.6vw, 2.2rem);
    padding: min(clamp(0.6rem, 1.2vh, 1.2rem), 1.8vh) clamp(1.5rem, 3vw, 4rem);
    background: linear-gradient(135deg, rgba(212,168,67,0.12) 0%, rgba(15,26,62,0.5) 50%, rgba(212,168,67,0.08) 100%);
    border: 1px solid rgba(212,168,67,0.25);
    border-radius: clamp(6px, 0.8vw, 10px);
    flex-shrink: 0;
    height: 10vh; min-height: 0;
}

.ramadan-banner__lantern-img {
    height: 80%;
    width: auto;
    filter: drop-shadow(0 0 8px rgba(212,168,67,0.5));
    animation: lantern-sway 3s ease-in-out infinite;
}
.ramadan-banner__lantern-img--right { animation-delay: -1.5s; }

@keyframes lantern-sway { 0%,100% { transform: rotate(-3deg) translateY(0); } 50% { transform: rotate(3deg) translateY(-2px); } }

.ramadan-banner__text { text-align: center; }
.ramadan-banner__title {
    color: var(--rm-gold-light);
    font-size: min(clamp(1rem, 2vw, 2.4rem), 3.8vh);
    font-weight: 700; letter-spacing: 0.2ch;
    text-shadow: 0 0 20px rgba(212,168,67,0.3); line-height: 1.2;
}
.ramadan-banner__subtitle {
    color: var(--rm-text-muted);
    font-size: min(clamp(0.8rem, 1.2vw, 1.2rem), 1.8vh);
    font-weight: 500; letter-spacing: 0.1ch; margin-top: 0.1rem;
    margin-top: 0.8ch;
}

/* ═══ ANKÜNDIGUNGEN ══════════════════════════════════════ */
body.theme-ramadan .announcements {
    background: linear-gradient(135deg, rgba(15,22,50,0.5) 0%, rgba(212,168,67,0.06) 100%);
    border: 1px solid rgba(212,168,67,0.2);
    border-radius: clamp(6px, 0.8vw, 10px);
}
body.theme-ramadan .announcements__text { color: var(--rm-text-muted); }

/* ═══ FOOTER ═════════════════════════════════════════════ */
body.theme-ramadan .container--footer {
    background: rgba(30,20,10,0.75);
    border-top: 1px solid rgba(212,168,67,0.15);
    box-shadow: 0 -2px 20px rgba(0,0,0,0.2);
}
body.theme-ramadan .footer {
    display: flex; flex-flow: row;
    justify-content: space-between; align-items: center; width: 100%;
}
body.theme-ramadan .footer__text { color: var(--rm-text-muted); }
/* Logo gleiche Farbe wie Text */
body.theme-ramadan .footer__logo { filter: brightness(0.8) sepia(1) hue-rotate(10deg) saturate(0.3); opacity: 0.75; }

/* ═══ TAG-ZÄHLER ═════════════════════════════════════════ */
.ramadan-day-counter { display: none; }

body.theme-ramadan .ramadan-day-counter {
    display: flex; align-items: center;
    gap: clamp(0.3rem, 0.5vw, 0.6rem);
}

.ramadan-day-counter__icon {
    width: clamp(1rem, 1.4vw, 1.5rem); height: clamp(1rem, 1.4vw, 1.5rem);
    color: var(--rm-gold-light);
    filter: drop-shadow(0 0 4px rgba(212,168,67,0.4));
}

.ramadan-day-counter__info {
    display: flex; flex-direction: row; align-items: baseline;
    gap: clamp(0.4rem, 0.8vh, 0.8rem);
}

.ramadan-day-counter__text {
    color: var(--rm-gold-light);
    font-size: clamp(0.9rem, 1.3vw, 1.5rem);
    font-weight: 700; line-height: 1;
}

.ramadan-day-counter__label {
    color: var(--rm-text-muted);
    font-size: clamp(0.6rem, 0.8vw, 0.85rem);
    font-weight: 500; line-height: 1;
    letter-spacing: 0.05ch; text-transform: uppercase;
}

/* ═══ GOLDLINIE + LATERNEN ═══════════════════════════════ */
body.theme-ramadan .section::after {
    content: ''; position: absolute; top: 12vh; left: 0; right: 0; height: 3px;
    background: linear-gradient(90deg, transparent 0%, rgba(212,168,67,0.15) 10%, rgba(212,168,67,0.3) 25%, rgba(212,168,67,0.15) 40%, transparent 50%, rgba(212,168,67,0.15) 60%, rgba(212,168,67,0.3) 75%, rgba(212,168,67,0.15) 90%, transparent 100%);
    z-index: 2; pointer-events: none;
}

.ramadan-lanterns { display: none; }
body.theme-ramadan .ramadan-lanterns {
    display: block; position: absolute; top: 12vh; left: 0; right: 0;
    height: 0; z-index: 2; pointer-events: none; overflow: visible;
}
.ramadan-lantern-svg { position: absolute; top: 0; filter: drop-shadow(0 4px 12px rgba(212,168,67,0.35)); }
.ramadan-lantern-svg--left-1  { left: 3%;    width: clamp(26px, 2.6vw, 45px); animation: lantern-hang 4s ease-in-out infinite; }
.ramadan-lantern-svg--left-2  { left: 7.5%;  width: clamp(20px, 2vw, 35px);   animation: lantern-hang 4.5s ease-in-out infinite; animation-delay: -1s; }
.ramadan-lantern-svg--right-1 { right: 3%;   width: clamp(26px, 2.6vw, 45px); animation: lantern-hang 4.2s ease-in-out infinite; animation-delay: -2s; }
.ramadan-lantern-svg--right-2 { right: 7.5%; width: clamp(20px, 2vw, 35px);   animation: lantern-hang 3.8s ease-in-out infinite; animation-delay: -0.5s; }
@keyframes lantern-hang { 0%,100% { transform: rotate(-2deg); } 50% { transform: rotate(2deg); } }

/* ═══ FEHLER-TOAST ═══════════════════════════════════════ */
body.theme-ramadan .error-toast { background: linear-gradient(135deg, #a03020, #802018); border-color: rgba(212,168,67,0.3); }
